

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5. Standard ML &#8212; Foundations of Programming Languages Second Edition</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Compiling Standard ML" href="usingsml.html" />
    <link rel="prev" title="4. Object-Oriented Programming" href="oop.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="usingsml.html" title="6. Compiling Standard ML"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="oop.html" title="4. Object-Oriented Programming"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Foundations of Programming Languages Second Edition</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Standard ML</a><ul>
<li><a class="reference internal" href="#imperative-vs-functional-programming">5.1. Imperative vs Functional Programming</a></li>
<li><a class="reference internal" href="#the-lambda-calculus">5.2. The Lambda Calculus</a><ul>
<li><a class="reference internal" href="#normal-form">5.2.1. Normal Form</a></li>
<li><a class="reference internal" href="#problems-with-applicative-order-reduction">5.2.2. Problems with Applicative Order Reduction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-started-with-standard-ml">5.3. Getting Started with Standard ML</a></li>
<li><a class="reference internal" href="#expressions-types-structures-and-functions">5.4. Expressions, Types, Structures, and Functions</a></li>
<li><a class="reference internal" href="#recursive-functions">5.5. Recursive Functions</a></li>
<li><a class="reference internal" href="#characters-strings-and-lists">5.6. Characters, Strings, and Lists</a></li>
<li><a class="reference internal" href="#pattern-matching">5.7. Pattern Matching</a></li>
<li><a class="reference internal" href="#tuples">5.8. Tuples</a></li>
<li><a class="reference internal" href="#let-expressions-and-scope">5.9. Let Expressions and Scope</a></li>
<li><a class="reference internal" href="#datatypes">5.10. Datatypes</a></li>
<li><a class="reference internal" href="#parameter-passing-in-standard-ml">5.11. Parameter Passing in Standard ML</a></li>
<li><a class="reference internal" href="#efficiency-of-recursion">5.12. Efficiency of Recursion</a></li>
<li><a class="reference internal" href="#tail-recursion">5.13. Tail Recursion</a></li>
<li><a class="reference internal" href="#currying">5.14. Currying</a></li>
<li><a class="reference internal" href="#anonymous-functions">5.15. Anonymous Functions</a></li>
<li><a class="reference internal" href="#higher-order-functions">5.16. Higher-Order Functions</a><ul>
<li><a class="reference internal" href="#composition">5.16.1. Composition</a></li>
<li><a class="reference internal" href="#map">5.16.2. Map</a></li>
<li><a class="reference internal" href="#reduce-or-foldright">5.16.3. Reduce or Foldright</a></li>
<li><a class="reference internal" href="#filter">5.16.4. Filter</a></li>
</ul>
</li>
<li><a class="reference internal" href="#continuation-passing-style">5.17. Continuation Passing Style</a></li>
<li><a class="reference internal" href="#input-and-output">5.18. Input and Output</a></li>
<li><a class="reference internal" href="#programming-with-side-effects">5.19. Programming with Side-effects</a><ul>
<li><a class="reference internal" href="#variable-declarations">5.19.1. Variable Declarations</a></li>
<li><a class="reference internal" href="#sequential-execution">5.19.2. Sequential Execution</a></li>
<li><a class="reference internal" href="#iteration">5.19.3. Iteration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exception-handling">5.20. Exception Handling</a></li>
<li><a class="reference internal" href="#encapsulation-in-ml">5.21. Encapsulation in ML</a><ul>
<li><a class="reference internal" href="#signatures">5.21.1. Signatures</a></li>
<li><a class="reference internal" href="#implementing-a-signature">5.21.2. Implementing a Signature</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type-inference">5.22. Type Inference</a></li>
<li><a class="reference internal" href="#building-a-prefix-caclculator-interpreter">5.23. Building a Prefix Caclculator Interpreter</a><ul>
<li><a class="reference internal" href="#the-prefix-calc-parser">5.23.1. The Prefix Calc Parser</a></li>
<li><a class="reference internal" href="#the-ast-evaluator">5.23.2. The AST Evaluator</a></li>
<li><a class="reference internal" href="#imperative-programming-observations">5.23.3. Imperative Programming Observations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chapter-summary">5.24. Chapter Summary</a></li>
<li><a class="reference internal" href="#exercises">5.25. Exercises</a></li>
<li><a class="reference internal" href="#solutions-to-practice-problems">5.26. Solutions to Practice Problems</a><ul>
<li><a class="reference internal" href="#solution-to-practice-problem-5-1">5.26.1. Solution to Practice Problem 5.1</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-2">5.26.2. Solution to Practice Problem 5.2</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-3">5.26.3. Solution to Practice Problem 5.3</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-4">5.26.4. Solution to Practice Problem 5.4</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-5">5.26.5. Solution to Practice Problem 5.5</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-6">5.26.6. Solution to Practice Problem 5.6</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-7">5.26.7. Solution to Practice Problem 5.7</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-8">5.26.8. Solution to Practice Problem 5.8</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-9">5.26.9. Solution to Practice Problem 5.9</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-10">5.26.10. Solution to Practice Problem 5.10</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-11">5.26.11. Solution to Practice Problem 5.11</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-12">5.26.12. Solution to Practice Problem 5.12</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-13">5.26.13. Solution to Practice Problem 5.13</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-14">5.26.14. Solution to Practice Problem 5.14</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-15">5.26.15. Solution to Practice Problem 5.15</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-16">5.26.16. Solution to Practice Problem 5.16</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-17">5.26.17. Solution to Practice Problem 5.17</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-18">5.26.18. Solution to Practice Problem 5.18</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-19">5.26.19. Solution to Practice Problem 5.19</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-20">5.26.20. Solution to Practice Problem 5.20</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-21">5.26.21. Solution to Practice Problem 5.21</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-22">5.26.22. Solution to Practice Problem 5.22</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-23">5.26.23. Solution to Practice Problem 5.23</a></li>
<li><a class="reference internal" href="#solution-to-practice-problem-5-24">5.26.24. Solution to Practice Problem 5.24</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="oop.html"
                        title="previous chapter">4. Object-Oriented Programming</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="usingsml.html"
                        title="next chapter">6. Compiling Standard ML</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/functional.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="standard-ml">
<h1>5. Standard ML<a class="headerlink" href="#standard-ml" title="Permalink to this headline">¶</a></h1>
<div class="figboxcenter docutils container">
<div class="highlight-pascal notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">program</span> <span class="n">P</span><span class="o">;</span>
  <span class="k">var</span> <span class="n">b</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>

  <span class="k">function</span> <span class="nf">a</span><span class="p">()</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
  <span class="k">begin</span>
     <span class="n">b</span><span class="o">:=</span><span class="n">b</span><span class="o">+</span><span class="mi">2</span><span class="o">;</span>
     <span class="n">return</span> <span class="mi">5</span>
  <span class="k">end</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">b</span><span class="o">:=</span><span class="mi">10</span><span class="o">;</span>
  <span class="nb">write</span><span class="p">(</span><span class="n">a</span><span class="p">()</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>
  <span class="cm">(* or write(b+a()) *)</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</td></tr></table></div>
<p><strong>Fig. 5.1: Commutativity</strong></p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.1</strong></p>
<p>Is addition commutative in C++, Pascal, Java, or Python? Will <em>write(a+b)</em> always produce the same value as <em>write(b+a)</em>? Consider the Pascal program in figure 5.1. What does this program produce? What would it produce if the statement were <em>write(b+a())</em>?</p>
<p><a class="reference internal" href="#exercise5-1"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="section" id="imperative-vs-functional-programming">
<h2>5.1. Imperative vs Functional Programming<a class="headerlink" href="#imperative-vs-functional-programming" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="the-lambda-calculus">
<h2>5.2. The Lambda Calculus<a class="headerlink" href="#the-lambda-calculus" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><img class="math" src="_images/math/589fef00e0877b159c046f11aa63b1d157024b09.png" alt="\lambda x.\lambda y.y^2+x"/></p>
<p><img class="math" src="_images/math/beddb99245f51a44ea137d4d6dd05257c0abeab1.png" alt="\lambda y.\lambda x.y^2+x"/></p>
</div></blockquote>
<div class="section" id="normal-form">
<h3>5.2.1. Normal Form<a class="headerlink" href="#normal-form" title="Permalink to this headline">¶</a></h3>
<div class="math">
<p><img src="_images/math/f0a92c3701e7fdc9f3bcdb28290eb865350f84db.png" alt="(\lambda x.x^3) 2"/></p>
</div><div class="figboxcenter docutils container">
<blockquote>
<div><p><img class="math" src="_images/math/39eaa71fb712d02f6f8c668714f857d1efe15ca7.png" alt="\underline{(\lambda xyz.xz(yz))(\lambda x.x)}(\lambda xy.x)"/></p>
<p><img class="math" src="_images/math/b50affd8a21dbc2873b1af24a5092c99d5cc581b.png" alt="\Rightarrow\underline{(\lambda yz.(\lambda x.x)z(yz))(\lambda xy.x)}"/></p>
<p><img class="math" src="_images/math/c474518f9362e7fcab8f30fad4d48aa4df54fa29.png" alt="\Rightarrow\lambda z.\underline{(\lambda x.x)z}((\lambda xy.x)z)"/></p>
<p><img class="math" src="_images/math/28c16dddde4d2939e5cd0851486f853a6ebf1f81.png" alt="\Rightarrow\lambda z.z(\underline{(\lambda xy.x)z})"/></p>
<p><img class="math" src="_images/math/11bb8a8dde70a9d9a62fedd98b74f7b9074341ab.png" alt="\Rightarrow\lambda z.z(\lambda y.z)\Box"/></p>
</div></blockquote>
<p><strong>Fig 5.2</strong> Normal Order Reduction</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.2</strong></p>
<p>Another reduction strategy is called applicative order reduction. Using this strategy, the left-most inner-most redex is always reduced first. Use this strategy to reduce the expression in example 5.3. Be sure to parenthesize your expression first so you are sure that you left-associate redexes.</p>
<p><a class="reference internal" href="#exercise5-2"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="problems-with-applicative-order-reduction">
<h3>5.2.2. Problems with Applicative Order Reduction<a class="headerlink" href="#problems-with-applicative-order-reduction" title="Permalink to this headline">¶</a></h3>
<div class="exercise docutils container">
<p><strong>Practice 5.3</strong></p>
<p>Reduce the expression <img class="math" src="_images/math/8603b44ce7dd9a60dc75bdbd28507d7a8fa766f3.png" alt="(\lambda x.y)((\lambda x.xx)(\lambda x.xx))"/> with both normal order and applicative order reduction. Don’t spend too much time on this!</p>
<p><a class="reference internal" href="#exercise5-3"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
</div>
<div class="section" id="getting-started-with-standard-ml">
<h2>5.3. Getting Started with Standard ML<a class="headerlink" href="#getting-started-with-standard-ml" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="expressions-types-structures-and-functions">
<h2>5.4. Expressions, Types, Structures, and Functions<a class="headerlink" href="#expressions-types-structures-and-functions" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- 6;
val it = 6 : int
- 5*3;
val it = 15 : int
- ~1;
val it = ~1 : int
- 5.0 * 3.0;
val it = 15.0 : real
- true;
val it = true : bool
- 5 * 3.0;
Error: operator and operand don&#39;t agree
  operator domain: int * int
  operand:         int * real
  in expression:
    5 * 3.0
-
</pre></div>
</div>
</div></blockquote>
<p><strong>Fig 5.3</strong> Interpreter Interaction</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- Real.fromInt(5) * 3.0;
val it = 15.0 : real
-
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val fromInt : int -&gt; real
</pre></div>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.4</strong></p>
<p>Write expressions that compute the values described below. Consult the basis library in Appendix B of the textbook as needed.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Divide the integer bound to <em>x</em> by 6.</li>
<li>Multiply the integer <em>x</em> and the real number <em>y</em> giving the closest integer as the result.</li>
<li>Divide the real number 6.3 into the real number bound to <em>x</em>.</li>
<li>Compute the remainder of dividing integer <em>x</em> by integer <em>y</em>.</li>
</ol>
</div></blockquote>
<p><a class="reference internal" href="#exercise5-4"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="recursive-functions">
<h2>5.5. Recursive Functions<a class="headerlink" href="#recursive-functions" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun babsqrt(x,guess) =
  if Real.abs(x-guess*guess) &lt; x/1000000.0 then
    guess
  else
    babsqrt(x,(guess + x/guess)/2.0);
</pre></div>
</div>
<p><strong>Fig. 5.4</strong> Square Root</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.5</strong></p>
<p><img class="math" src="_images/math/1d7b8564797759dd9283ad655b5c422d4fffe445.png" alt="n!"/> is called the factorial of <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/>. It is defined recursively as <img class="math" src="_images/math/bdcc7a8c0087d3231ded5f974d68623f68696ca1.png" alt="0!=1"/> and <img class="math" src="_images/math/4c5bcb7cbf2fd2641efa660c648ecde289b3bbc8.png" alt="n!=n*(n-1)!"/>. Write this as a recursive function in SML.</p>
<p><a class="reference internal" href="#exercise5-5"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.6</strong></p>
<p>The Fibonacci sequence is a sequence of numbers 0, 1, 1, 2, 3, 5, 8, 13, … Subsequent numbers in the sequence are derived by adding the previous two numbers in the sequence together. This leads to a recursive definition of the Fibonacci sequence. What is the recursive definition of Fibonacci’s sequence? HINT: The first number in the sequence can be thought of as the zeroeth element, then the first element is next and so on. So, <em>fib(0) = 0</em>. After arriving at the definition, write a recursive SML function to find the <img class="math" src="_images/math/7d7b52b181b1a3c66207fe79f3dd2e551590be67.png" alt="n^{th}"/> element of the sequence.</p>
<p><a class="reference internal" href="#exercise5-6"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="characters-strings-and-lists">
<h2>5.6. Characters, Strings, and Lists<a class="headerlink" href="#characters-strings-and-lists" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>[1,4,9,16]</li>
<li>1::[4,9,16,25]</li>
<li>#”a”::#”b”::[#”c”]</li>
<li>1::2::3::nil</li>
<li>[“hello”,”how”]&#64;[“are”,”you”]</li>
</ul>
</div></blockquote>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>:: : &#39;a * &#39;a list -&gt; &#39;a list
@ : &#39;a list * &#39;a list -&gt; &#39;a list
hd : &#39;a list -&gt; &#39;a
tl : &#39;a list -&gt; &#39;a list
</pre></div>
</div>
<p><strong>Fig. 5.5</strong> Function Signatures</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.7</strong></p>
<p>The following are NOT valid list constructions in SML. Why not? Can you fix them?</p>
<blockquote>
<div><ul class="simple">
<li>#”a”::[“beautiful day”]</li>
<li>“hi”::”there”</li>
<li>[“how”,”are”]::”you”</li>
<li>[1,2.0,3.5,4.2]</li>
<li>2&#64;[3,4]</li>
<li>[]::3</li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#exercise5-7"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun implode(lst) =
  if lst = [] then &quot;&quot;
  else str(hd(lst))^implode(tl(lst))
</pre></div>
</div>
<p><strong>Fig. 5.6</strong> The Implode Function</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.8</strong></p>
<p>Write a function called <em>explode</em> that will take a string as an argument and return a list of characters in the string. So, <em>explode(“hi”)</em> would yield <em>[#”h”,#”i”]</em>. HINT: How do you get the first character of a string?</p>
<p><a class="reference internal" href="#exercise5-8"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun length(x) =
   if null x then 0
   else 1+length(tl(x))
fun append(L1, L2) =
   if null L1 then L2
   else hd(L1)::append(tl(L1),L2)
</pre></div>
</div>
<p><strong>Fig. 5.7</strong> Two List Functions</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.9</strong></p>
<p>Use the append function to write reverse. The reverse function reverses the elements of a list. Its signature is</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>reverse = fn: &#39;a list -&gt; &#39;a list
</pre></div>
</div>
<p><a class="reference internal" href="#exercise5-9"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="pattern-matching">
<h2>5.7. Pattern Matching<a class="headerlink" href="#pattern-matching" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun append(nil,L2) = L2
  | append(h::t,L2) = h::(append(t,L2))
</pre></div>
</div>
<p><strong>Fig. 5.8</strong> Pattern Matching</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.10</strong></p>
<p>Rewrite reverse using pattern-matching.</p>
<p><a class="reference internal" href="#exercise5-10"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="tuples">
<h2>5.8. Tuples<a class="headerlink" href="#tuples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val append : &#39;a list * &#39;a list -&gt; &#39;a list
</pre></div>
</div>
</div>
<div class="section" id="let-expressions-and-scope">
<h2>5.9. Let Expressions and Scope<a class="headerlink" href="#let-expressions-and-scope" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun sumupto(0) = 0
  | sumupto(n) =
    let val sum = sumupto(n-1)
    in
      n + sum
    end
</pre></div>
</div>
<p><strong>Fig. 5.9</strong> Let Expression</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.11</strong></p>
<p>What is the value of <em>x</em> at the various numbered points within the following expression? Be careful, it’s not what you think it might be if you are relying on your imperative understanding of code.</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">let</span> <span class="kr">val</span> <span class="nv">x</span> <span class="p">=</span> <span class="mi">10</span>
<span class="kr">in</span>
   <span class="cm">(* 1. Value of x here? *)</span>
   <span class="kr">let</span> <span class="kr">val</span> <span class="nv">x</span> <span class="p">=</span> <span class="n">x+</span><span class="mi">1</span>
   <span class="kr">in</span>
     <span class="cm">(* 2. Value of x here? *)</span>
     <span class="n">x</span>
   <span class="kr">end</span><span class="p">;</span>
   <span class="cm">(* 3. Value of x here? *)</span>
   <span class="n">x</span>
<span class="kr">end</span>
</pre></div>
</div>
<p><a class="reference internal" href="#exercise5-11"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>let fun a() =
        let val x = 1
            fun b() = x
        in
          b
        end
    val x = 2
    val c = a()
in
  c()
end
</pre></div>
</div>
<p><strong>Fig. 5.10</strong> Scope</p>
</div>
</div>
<div class="section" id="datatypes">
<h2>5.10. Datatypes<a class="headerlink" href="#datatypes" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">TokenType</span> <span class="p">{</span>
   <span class="n">identifier</span><span class="p">,</span><span class="n">keyword</span><span class="p">,</span>
   <span class="n">number</span><span class="p">,</span><span class="n">add</span><span class="p">,</span><span class="n">sub</span><span class="p">,</span><span class="n">times</span><span class="p">,</span>
   <span class="n">divide</span><span class="p">,</span><span class="n">lparen</span><span class="p">,</span>
   <span class="n">rparen</span><span class="p">,</span><span class="n">eof</span><span class="p">,</span><span class="n">unrecognized</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>Fig. 5.11</strong> C++ Enum Type</p>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TokenType</span> <span class="n">t</span> <span class="o">=</span> <span class="n">keyword</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//this is the keyword value.</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- datatype TokenType = Identifier | Keyword | Number |
    Add | Sub | Times | Divide | LParen | RParen | EOF |
    Unrecognized;
datatype TokenType = Identifier | Keyword | Number | ...
- val x = Keyword;
x = Keyword : TokenType
</pre></div>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>datatype
  AST = add&#39; of AST * AST
      | sub&#39; of AST * AST
      | prod&#39; of AST * AST
      | div&#39; of AST * AST
      | negate&#39; of AST
      | integer&#39; of int
      | store&#39; of AST
      | recall&#39;;
</pre></div>
</div>
<p><strong>Fig. 5.12</strong> An AST Datatype</p>
</div>
<div class="figboxcenter docutils container">
<div class="figure">
<img alt="_images/abstree3.png" src="_images/abstree3.png" />
</div>
<p><strong>Fig. 5.13</strong> An AST in SML</p>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun evaluate(add&#39;(e1,e2),min) =
    let val (r1,mout1)= evaluate(e1,min)
        val (r2,mout) = evaluate(e2,mout1)
    in
      (r1+r2,mout)
    end

  | evaluate(sub&#39;(e1,e2),min) =
    let val (r1,mout1)= evaluate(e1,min)
        val (r2,mout) = evaluate(e2,mout1)
    in
      (r1-r2,mout)
    end
</pre></div>
</div>
<p><strong>Fig. 5.14</strong> Pattern Matching Function Results</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.12</strong></p>
<p>Define a datatype for integer lists. A list is constructed of a head and a tail. Sometimes this constructor is called <em>cons</em>. The empty list is also a list and is usually called <em>nil</em>. However, in this practice problem, to distinguish from the built-in <em>nil</em> you could call it <em>nil’</em>.</p>
<p><a class="reference internal" href="#exercise5-12"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.13</strong></p>
<p>Write a function called <em>maxIntList</em> that returns the maximum integer found in one of the lists you just defined in practice problem 5.12. You can consult Appendix B of the textbook for help with finding the max of two integers.</p>
<p><a class="reference internal" href="#exercise5-13"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="parameter-passing-in-standard-ml">
<h2>5.11. Parameter Passing in Standard ML<a class="headerlink" href="#parameter-passing-in-standard-ml" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="efficiency-of-recursion">
<h2>5.12. Efficiency of Recursion<a class="headerlink" href="#efficiency-of-recursion" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun fib(0) = 0
  | fib(1) = 1
  | fib(n) = fib(n-1) + fib(n-2)
</pre></div>
</div>
<p><strong>Fig. 5.15</strong> The Fib Function</p>
</div>
<div class="figboxcenter docutils container">
<div class="figure">
<img alt="_images/fibtree.png" src="_images/fibtree.png" />
</div>
<p><strong>Fig. 5.16</strong> Calls to calculate fib(5)</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.14</strong></p>
<p>One way of proving that the <em>fib</em> function given above is exponential is to show that the number of calls for <em>fib(n)</em> is bounded by two exponential functions. In other words, there is an exponential function of <em>n</em> that will always return less than the number of calls required to compute <em>fib(n)</em> and there is another exponential function that always returns greater than the number of required calls to compute <em>fib(n)</em> for some choice of starting <em>n</em> and all values greater than it. If the number of calls to compute <em>fib(n)</em> lies in between then the <em>fib</em> function must have exponential complexity. Find two exponential functions of the form <img class="math" src="_images/math/3d484ce2e9452d8c52c40fdbc261ca7bfefba5d0.png" alt="c^m"/> that bound the number of calls required to compute <em>fib(n)</em>.</p>
<p><a class="reference internal" href="#exercise5-14"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun fib(n) =
  let fun fibhelper(count,current,previous) =
      if count = n then previous
      else fibhelper(count+1,previous+current,current)
  in
      fibhelper(0,1,0)
  end
</pre></div>
</div>
<p><strong>Fig. 5.17</strong> An Efficient Fib Function</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.15</strong></p>
<p>Consider the reverse function from practice problem 5.10. The <em>append</em> function is called <em>n</em> times, where <em>n</em> is the length of the list. How many cons operations happen each time append is called? What is the overall complexity of the reverse function?</p>
<p><a class="reference internal" href="#exercise5-15"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="tail-recursion">
<h2>5.13. Tail Recursion<a class="headerlink" href="#tail-recursion" title="Permalink to this headline">¶</a></h2>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun factorial 0 = 1
  | factorial n = n * factorial (n-1);
</pre></div>
</div>
<p><strong>Fig. 5.18</strong> Factorial</p>
</div>
<div class="math">
<p><img src="_images/math/493f4a3a5a8f1c71023174df8dd353fc5abeea87.png" alt="(6 * (5 * (4 * (3 * (2 * (1 * (factorial 0)))))))"/></p>
</div><div class="exercise docutils container">
<p><strong>Practice 5.16</strong></p>
<p>Show the run-time execution stack at the point that factorial 0 is executing when the original call was factorial 6.</p>
<p><a class="reference internal" href="#exercise5-16"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun factorial n =
    let fun tailfac(0,prod) = prod
          | tailfac(n,prod) = tailfac(n-1,prod*n)
    in
      tailfac(n,1)
    end
</pre></div>
</div>
<p><strong>Fig. 5.19</strong> Tail Recursive Factorial</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.17</strong></p>
<p>Use the accumulator pattern to devise a more efficient reverse function. The append function is not used in the efficient reverse function. HINT: What are we trying to accumulate? What is the identity of that operation?</p>
<p><a class="reference internal" href="#exercise5-17"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="currying">
<h2>5.14. Currying<a class="headerlink" href="#currying" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun plus(a:int,b) = a+b;
val plus = fn : int * int -&gt; int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- plus (5,8);
val it = 13 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun cplus (a:int) b = a+b;
val cplus = fn : int -&gt; (int -&gt; int )
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- cplus 5 8;
val it = 13 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- (cplus 5) 8;
val it = 13 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- cplus 5;
val it = fn : int -&gt; int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val add5 = cplus 5;
val add5 = fn : int -&gt; int
- add5 8;
val it = 13 : int
</pre></div>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.18</strong></p>
<p>Write a function that given an uncurried function of two arguments will return a curried form of the function so that it takes its arguments one at a time.</p>
<p>Write a function that given a curried function that takes two arguments one at a time will return an uncurried version of the given function.</p>
<p><a class="reference internal" href="#exercise5-18"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="anonymous-functions">
<h2>5.15. Anonymous Functions<a class="headerlink" href="#anonymous-functions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fn x =&gt; fn y =&gt; y*y + x;
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- (fn x =&gt; fn y =&gt; y*y + x) 3 4;
val it = 19 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val f = fn x =&gt; fn y =&gt; y*y + x;
val f = fn: int -&gt; int -&gt; int
- f 3 4;
val it = 19 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val rec fac = fn n =&gt; if n=0 then 1 else n*fac(n-1);
val fac = fn: int -&gt; int
- fac 7;
val it = 5040:int
</pre></div>
</div>
</div>
<div class="section" id="higher-order-functions">
<h2>5.16. Higher-Order Functions<a class="headerlink" href="#higher-order-functions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val fnlist = [fn (n) =&gt; 2*n, abs, ~, fn (n) =&gt; n*n];
val fnlist = [fn,fn,fn,fn] : (int -&gt; int) list
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun construction  nil n = nil
    | construction (h::t) n = (h n)::(construction t n);
val construction = fn : (&#39;a -&gt; &#39;b) list -&gt; &#39;a -&gt; &#39;b list
- construction [op +, op *, fn (x,y) =&gt; x - y] (4,5);
val it = [9,20,~1] : int list
</pre></div>
</div>
<div class="section" id="composition">
<h3>5.16.1. Composition<a class="headerlink" href="#composition" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun compose f g x = f (g x);
val compose = fn : (&#39;a -&gt; &#39;b) -&gt; (&#39;c -&gt; &#39;a) -&gt; &#39;c -&gt; &#39;b
- fun add1 n = n+1;
val add1 = fn : int -&gt; int
- fun sqr n:int = n*n;
val sqr = fn : int -&gt; int
- val incsqr = compose add1 sqr;
val incsqr = fn : int -&gt; int
- val sqrinc = compose sqr add1;
val sqrinc = fn : int -&gt; int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- incsqr 5;
val it = 26 : int
- sqrinc 5;
val it = 36 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- op o;
val it = fn : (&#39;a -&gt; &#39;b) * (&#39;c -&gt; &#39;a) -&gt; &#39;c -&gt; &#39;b
- val incsqr = add1 o sqr;
val incsqr = fn : int -&gt; int
- incsqr 5;
val it = 26 : int
- val sqrinc = op o(sqr,add1);
val sqrinc = fn : int -&gt; int
- sqrinc 5;
val it = 36 : int
</pre></div>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun map f nil = nil
  | map f (h::t) = (f h)::(map f t);
</pre></div>
</div>
<p><strong>Fig. 5.20</strong> The Map Function</p>
</div>
</div>
<div class="section" id="map">
<h3>5.16.2. Map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- map;
val it = fn : (&#39;a -&gt; &#39;b) -&gt; &#39;a list -&gt; &#39;b list
- map add1 [1,2,3];
val it = [2,3,4] : int list
- map (fn n =&gt; n*n - 1) [1,2,3,4,5];
val it = [0,3,8,15,24] : int list
- map (fn ls =&gt; &quot;a&quot;::ls) [[&quot;a&quot;,&quot;b&quot;],[&quot;c&quot;],[&quot;d&quot;,&quot;e&quot;,&quot;f&quot;]];
val it = [[&quot;a&quot;,&quot;a&quot;,&quot;b&quot;],[&quot;a&quot;,&quot;c&quot;],[&quot;a&quot;,&quot;d&quot;,&quot;e&quot;,&quot;f&quot;]] :
           string list list
- map real [1,2,3,4,5];
val it = [1.0,2.0,3.0,4.0,5.0] : real list
</pre></div>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.19</strong></p>
<p>Describe the behavior (signatures and output) of these functions:</p>
<blockquote>
<div><ul class="simple">
<li>map (map add1)</li>
<li>(map map)</li>
</ul>
</div></blockquote>
<p>Invoking <em>(map map)</em> causes the type inference system of SML to report</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>stdIn:12.27-13.7 Warning: type vars not generalized
   because of value restriction are instantiated to
   dummy types (X1,X2,...)
</pre></div>
</div>
<p>This warning message is OK. It is telling you that to complete the type inference for this expression, SML had to instantiate a type variable to a dummy variable. When more type information is available, SML would not need to do this. The warning message only applies to the specific case where you created a function by invoking <em>(map map)</em>. In the presence of more information the type inference system will interpret the type correctly without any dummy variables.</p>
<p><a class="reference internal" href="#exercise5-19"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="reduce-or-foldright">
<h3>5.16.3. Reduce or Foldright<a class="headerlink" href="#reduce-or-foldright" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun sum nil = 0
    | sum ((h:int)::t) = h + sum t;

val sum = fn : int list -&gt; int
- sum [1,2,3,4,5];
val it = 15 : int

- fun product nil = 1
    | product ((h:int)::t) = h * product t;

val product = fn : int list -&gt; int
- product [1,2,3,4,5];
val it = 120 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun foldr f init nil = init
    | foldr f init (h::t) = f(h, foldr f init t);

val foldr = fn : (&#39;a * &#39;b -&gt; &#39;b) -&gt; &#39;b -&gt; &#39;a list -&gt; &#39;b
- foldr op + 0 [1,2,3,4,5];
val it = 15 : int
- foldr op * 1 [1,2,3,4,5];
val it = 120 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val sumlist = List.foldr (op +) 0;
val sumlist = fn : int list -&gt; int
- val mullist = List.foldr op * 1;
val mullist = fn : int list -&gt; int
- sumlist [1,2,3,4,5];
val it = 15 : int
- mullist [1,2,3,4,5];
val it = 120 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- List.foldr;
val it = fn : (&#39;a * &#39;b -&gt; &#39;b) -&gt; &#39;b -&gt; &#39;a list -&gt; &#39;b
- List.foldl;
val it = fn : (&#39;a * &#39;b -&gt; &#39;b) -&gt; &#39;b -&gt; &#39;a list -&gt; &#39;b
- fun abdiff (m,n:int) = abs(m-n);
val abdiff = fn : int * int -&gt; int
- foldr abdiff 0 [1,2,3,4,5];
val it = 1 : int
- foldl abdiff 0 [1,2,3,4,5];
val it = 3 : int
</pre></div>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.20</strong></p>
<p>How does <em>foldl</em> differ from <em>foldr</em>? Determine the difference by looking at the example above.
Then, describe the result of these functions invocations.</p>
<blockquote>
<div><ul class="simple">
<li>foldr op :: nil ls</li>
<li>foldr op &#64; nil ls</li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#exercise5-20"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="filter">
<h3>5.16.4. Filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun filter bfun nil = nil
    | filter bfun (h::t) = if bfun h then h::filter bfun t
                         else filter bfun t;

val it = fn : (&#39;a -&gt; bool) -&gt; &#39;a list -&gt; &#39;a list
- even;
val it = fn : int -&gt; bool
- filter even [1,2,3,4,5,6];
val it = [2,4,6] : int list
- filter (fn n =&gt; n &gt; 3) [1,2,3,4,5,6];
val it = [4,5,6] : int list
</pre></div>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.21</strong></p>
<p>Use filter to select numbers from a list that are</p>
<blockquote>
<div><ul class="simple">
<li>divisible by 7</li>
<li>greater than 10 or equal to zero</li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#exercise5-21"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
</div>
<div class="section" id="continuation-passing-style">
<h2>5.17. Continuation Passing Style<a class="headerlink" href="#continuation-passing-style" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun len nil = 0
    | len (h::t) = 1+(len t);
val len = fn : &#39;a list -&gt; int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun cpslen nil k = k 0
    | cpslen (h::t) k = cpslen t (fn v =&gt; (k (1 + v)));
val cpslen = fn : &#39;a list -&gt; (int -&gt; &#39;b) -&gt; &#39;b
- cpslen [1,2,3] (fn v =&gt; v);
val it = 3 : int
</pre></div>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.22</strong></p>
<p>Trace the execution of cpslen to see how it works and how the continuation is used.</p>
<p><a class="reference internal" href="#exercise5-22"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.23</strong></p>
<p>Write a function called <em>depth</em> that prints the longest path in a binary tree. First create the datatype for a binary tree. You can use the <em>Int.max</em> function in your solution, which returns the maximum of two integers.</p>
<p>First write a non-cps <em>depth</em> function, then write a cps <em>cpsdepth</em> function.</p>
<p><a class="reference internal" href="#exercise5-23"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
<div class="section" id="input-and-output">
<h2>5.18. Input and Output<a class="headerlink" href="#input-and-output" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val s = TextIO.input(TextIO.stdIn);
hi there
val s = &quot;hi there\n&quot; : vector
- explode(s);
val it = [#&quot;h&quot;,#&quot;i&quot;,#&quot; &quot;,#&quot;t&quot;,#&quot;h&quot;,#&quot;e&quot;,
            #&quot;r&quot;,#&quot;e&quot;,#&quot;\n&quot;] : char list
- TextIO.output(TextIO.stdOut,s^&quot;How are you!\n&quot;);
hi there
How are you!
- val it = () : unit
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val u = TextIO.input1(TextIO.stdIn);
hi there
val u = SOME #&quot;h&quot; : elem option
=
= ^C
Interrupt
- u;
val it = SOME #&quot;h&quot; : elem option
- val v = valOf(u);
val v = #&quot;h&quot; : elem
</pre></div>
</div>
</div>
<div class="section" id="programming-with-side-effects">
<h2>5.19. Programming with Side-effects<a class="headerlink" href="#programming-with-side-effects" title="Permalink to this headline">¶</a></h2>
<div class="section" id="variable-declarations">
<h3>5.19.1. Variable Declarations<a class="headerlink" href="#variable-declarations" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- val x = ref 0;
val x = ref 0 : int ref
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- !x;
val it = 0 : int
- x := !x + 1;
val it = () : unit
- !x;
val it = 1 : int
</pre></div>
</div>
</div>
<div class="section" id="sequential-execution">
<h3>5.19.2. Sequential Execution<a class="headerlink" href="#sequential-execution" title="Permalink to this headline">¶</a></h3>
<div class="figboxcenter docutils container">
<div class="highlight-sml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="kr">let</span> <span class="kr">val</span> <span class="nv">x</span> <span class="p">=</span> <span class="n">ref</span> <span class="mi">0</span>
  <span class="kr">in</span>
    <span class="n">x:=</span> <span class="n">!x</span> <span class="n">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nn">TextIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="nn">TextIO</span><span class="p">.</span><span class="n">stdOut</span><span class="p">,</span><span class="s2">&quot;The new value of x is &quot;</span><span class="n">^</span>
                  <span class="nn">Int</span><span class="p">.</span><span class="n">toString</span><span class="p">(</span><span class="n">!x</span><span class="p">)</span><span class="n">^</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="n">!x</span>
  <span class="kr">end</span>
</pre></div>
</td></tr></table></div>
<p><strong>Fig 5.21</strong> Sequential Execution</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>The new value of x is 1
val it = 1 : int
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(TextIO.output(TextIO.stdOut,&quot;The value of x is &quot; ^
 Int.toString(x);
 x+1)
</pre></div>
</div>
</div>
<div class="section" id="iteration">
<h3>5.19.3. Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="exception-handling">
<h2>5.20. Exception Handling<a class="headerlink" href="#exception-handling" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>exception emptyList;

fun maxIntList [] = raise emptyList
  | maxIntList (h::t) = Int.max(h,maxIntList t) handle
                              emptyList =&gt; h
</pre></div>
</div>
</div>
<div class="section" id="encapsulation-in-ml">
<h2>5.21. Encapsulation in ML<a class="headerlink" href="#encapsulation-in-ml" title="Permalink to this headline">¶</a></h2>
<div class="section" id="signatures">
<h3>5.21.1. Signatures<a class="headerlink" href="#signatures" title="Permalink to this headline">¶</a></h3>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>signature SetSig =
sig
   exception Choiceset
   exception Restset
   datatype &#39;a set = Set of &#39;a list
   val emptyset   : &#39;a set
   val singleton  : &#39;a -&gt; &#39;a set
   val member     : &#39;&#39;a -&gt; &#39;&#39;a set -&gt; bool
   val union      : &#39;&#39;a set -&gt; &#39;&#39;a set -&gt; &#39;&#39;a set
   val intersect  : &#39;&#39;a set -&gt; &#39;&#39;a set -&gt; &#39;&#39;a set
   val setdif     : &#39;&#39;a set -&gt; &#39;&#39;a set -&gt; &#39;&#39;a set
   val card       : &#39;a set -&gt; int
   val subset     : &#39;&#39;a set -&gt; &#39;&#39;a set -&gt; bool
   val simetdif   : &#39;&#39;a set -&gt; &#39;&#39;a set -&gt; &#39;&#39;a set
   val forall     : &#39;&#39;a set -&gt; (&#39;&#39;a -&gt; bool) -&gt; bool
   val forsome    : &#39;&#39;a set -&gt; (&#39;&#39;a -&gt; bool) -&gt; bool
   val forsomeone : &#39;a set -&gt; (&#39;a -&gt; bool) -&gt; bool
end
</pre></div>
</div>
<p><strong>Fig. 5.22</strong> The Set Signature</p>
</div>
</div>
<div class="section" id="implementing-a-signature">
<h3>5.21.2. Implementing a Signature<a class="headerlink" href="#implementing-a-signature" title="Permalink to this headline">¶</a></h3>
<div class="figbox docutils container">
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(***** An Implementation of Sets as a SML datatype *****)

structure Set : SetSig =
struct

exception Choiceset
exception Restset

datatype &#39;a set = Set of &#39;a list

val emptyset = Set []

fun singleton e = Set [e]

fun member e (Set [])     = false
  | member e (Set (h::t)) = (e = h) orelse member e (Set t)

fun notmember element st = not (member element st)

fun union (s1 as Set L1) (s2 as Set L2) =
   let fun noDup e = notmember e s2
    in
      Set ((List.filter noDup L1)@(L2))
   end

...
end
</pre></div>
</div>
<p><strong>Fig. 5.23</strong> A Set Structure</p>
</div>
<div class="exercise docutils container">
<p><strong>Practice 5.24</strong></p>
<ol class="arabic simple">
<li>Write the card function. Cardinality of a set is the size of the set.</li>
<li>Write the intersect function. Intersection of two sets are just those elements that the two sets have in common. Sets do not contain duplicate elements.</li>
</ol>
<p><a class="reference internal" href="#exercise5-24"><span class="std std-ref">You can check your answer(s) here.</span></a></p>
</div>
</div>
</div>
<div class="section" id="type-inference">
<h2>5.22. Type Inference<a class="headerlink" href="#type-inference" title="Permalink to this headline">¶</a></h2>
<p><strong>IfThen</strong></p>
<blockquote>
<div><div class="math">
<p><img src="_images/math/f7ff39c4658f726882849a6a655f6667ff2365f0.png" alt="\frac{\varepsilon\vdash e_1:bool~~\varepsilon\vdash e_2:\alpha~~~\varepsilon\vdash e_3:\alpha}{\varepsilon\vdash i\!f~e_1~then~e_2~else~e_3 : \alpha}"/></p>
</div></div></blockquote>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun f(nil,nil) = nil
  | f(x::xs,y::ys) = (x,y)::f(xs,ys);
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>f: &#39;a * &#39;b -&gt; &#39;c
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>f: (&#39;p list) * (&#39;s list) -&gt; &#39;t list
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>f: &#39;p list * &#39;s list -&gt; (&#39;p * &#39;s) list
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun g h x = if null x then nil
            else
              if h (hd x) then g h (tl x)
              else (hd x)::g h (tl x);
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>g: &#39;a -&gt; &#39;b -&gt; &#39;c
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>g: &#39;a -&gt; (&#39;s list) -&gt; &#39;c
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>g: (&#39;s -&gt; bool) -&gt; (&#39;s list) -&gt; &#39;c
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>g: (&#39;s -&gt; bool) -&gt; &#39;s list -&gt; s list
</pre></div>
</div>
</div>
<div class="section" id="building-a-prefix-caclculator-interpreter">
<h2>5.23. Building a Prefix Caclculator Interpreter<a class="headerlink" href="#building-a-prefix-caclculator-interpreter" title="Permalink to this headline">¶</a></h2>
<p><img class="math" src="_images/math/9999025fd76bd850120ac1ade92d9d3506b1b118.png" alt="G=(\mathcal{N,T,P,}E)"/> where</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line-block">
<div class="line"><img class="math" src="_images/math/f2feec3062278eff8fb1411e275e5ac73137ccdb.png" alt="\mathcal{N} = \{E\}"/></div>
<div class="line"><img class="math" src="_images/math/29b4e7fd7f74825b872444804cb77bca4908c8ca.png" alt="\mathcal{T} = \{S,R,number,~,+,-,*,/\}"/></div>
<div class="line"><img class="math" src="_images/math/44ad79f4db8277d12b1a6f5def2d30122c89b9b0.png" alt="\mathcal{P}"/> is defined by the set of productions</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line"><img class="math" src="_images/math/4f3ecf216456b6792c35c02c81a29df3480a5f57.png" alt="E \rightarrow +~E~E \mid -~E~E \mid *~E~E \mid /~E~E \mid \sim E \mid S~E \mid R \mid number"/></div>
</div>
</div>
</div>
<div class="figbox docutils container">
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span>fun delimiter #&quot; &quot; = true
  | delimiter #&quot;\t&quot; = true
  | delimiter #&quot;\n&quot; = true
  | delimiter _ = false

fun run() =
  (TextIO.output(TextIO.stdOut,&quot;Please enter a prefix calculator expression: &quot;);
   TextIO.flushOut(TextIO.stdOut);
   let val line = TextIO.inputLine(TextIO.stdIn)
       val tokens = String.tokens delimiter (valOf line)
       val (ast,remainingTokens) = E(tokens)
       val result = eval(ast)
   in
     if length(remainingTokens) &lt;&gt; 0 then
       raise(eofException)
     else ();
     TextIO.output(TextIO.stdOut,&quot;The answer is: &quot; ^ Int.toString(result) ^ &quot;\n&quot;)
   end
   handle eofException =&gt;
             TextIO.output(TextIO.stdOut,
               &quot;You entered an invalid prefix expression.\n&quot;)
          | Option =&gt;
             TextIO.output(TextIO.stdOut,
               &quot;You entered invalid characters in the prefix expression.\n&quot;))
</pre></div>
</td></tr></table></div>
<p><strong>Fig. 5.24</strong> The Prefix Calc Interpreter Run Function</p>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- run();
Please enter a prefix calculator expression: + * S ~ 6 R 5
The answer is: 41
val it = () : unit
</pre></div>
</div>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span>exception eofException;

fun E (&quot;+&quot;::rest) =
  let val (ast1,rest1) = E(rest)
    val (ast2,rest2) = E(rest1)
  in
    (add&#39;(ast1,ast2),rest2)
  end
  | E (&quot;-&quot;::rest) =
  let val (ast1,rest1) = E(rest)
    val (ast2,rest2) = E(rest1)
  in
    (sub&#39;(ast1,ast2),rest2)
  end
  | E (&quot;*&quot;::rest) =
  let val (ast1,rest1) = E(rest)
    val (ast2,rest2) = E(rest1)
  in
    (prod&#39;(ast1,ast2),rest2)
  end
  | E (&quot;/&quot;::rest) =
  let val (ast1,rest1) = E(rest)
    val (ast2,rest2) = E(rest1)
  in
    (div&#39;(ast1,ast2),rest2)
  end
  | E (&quot;~&quot;::rest) =
  let val (ast,rest1) = E(rest)
  in
    (negate&#39;(ast),rest1)
  end
   | E (&quot;S&quot;::rest) =
  let val (ast,rest1) = E(rest)
  in
    (store&#39;(ast),rest1)
  end
  | E (&quot;R&quot;::rest) = (recall&#39;,rest)
  | E (x::rest) =
    let val i = valOf(Int.fromString(x))
    in
      (integer&#39;(i),rest)
    end
  | E nil = raise eofException;
</pre></div>
</td></tr></table></div>
<p><strong>Fig. 5.25</strong> The Parser</p>
</div>
<div class="section" id="the-prefix-calc-parser">
<h3>5.23.1. The Prefix Calc Parser<a class="headerlink" href="#the-prefix-calc-parser" title="Permalink to this headline">¶</a></h3>
<div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span>val memory = ref 0;
fun eval(add&#39;(t1,t2)) =
      eval(t1) + eval(t2)
  | eval(sub&#39;(t1,t2)) =
      eval(t1) - eval(t2)
  | eval(prod&#39;(t1,t2)) =
      eval(t1) * eval(t2)
  | eval(div&#39;(t1,t2)) =
      eval(t1) div eval(t2)
  | eval(negate&#39;(t)) =
       ~1 * eval(t)
  | eval(store&#39;(t)) =
    let val x = eval(t)
    in
      memory := x;
      x
    end
  | eval(recall&#39;) = !memory
  | eval(integer&#39;(x)) = x
</pre></div>
</td></tr></table></div>
<p><strong>Fig. 5.26</strong> The Evaluator</p>
</div>
</div>
<div class="section" id="the-ast-evaluator">
<h3>5.23.2. The AST Evaluator<a class="headerlink" href="#the-ast-evaluator" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="imperative-programming-observations">
<h3>5.23.3. Imperative Programming Observations<a class="headerlink" href="#imperative-programming-observations" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="chapter-summary">
<h2>5.24. Chapter Summary<a class="headerlink" href="#chapter-summary" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="exercises">
<h2>5.25. Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p>In the exercises below you are encouraged to write other functions that may help you in your solutions. You might have better luck with some of the harder ones if you solve a simpler problem first that can be used in the solution to the harder problem.</p>
<p>You may wish to put your solutions to these problems in a file and then</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- use &quot;thefile&quot;;
</pre></div>
</div>
<p>in SML. This will make writing the solutions easier. You can try the solutions out by placing tests right within the same file. You should always comment any code you write. Comments in SML are preceded with a <em>(*</em> and terminated with a <em>*)</em>.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Reduce <img class="math" src="_images/math/19906bd00a86f4994c16c294d24b24709c7f6c85.png" alt="(\lambda z.z+z)((\lambda x.\lambda y.x+y)~4~3)"/> by normal order and applicative order reduction strategies. Show the steps.</p>
</li>
<li><p class="first">How does the SML interpreter respond to evaluating each of the following expressions? Evaluate each of these expression in ML and record what the response of the ML interpreter is.</p>
<ol class="arabic simple">
<li><em>8 div 3;</em></li>
<li><em>8 mod 3;</em></li>
<li><em>“hi”^”there”;</em></li>
<li><em>8 mod 3 = 8 div 3 orelse 4 div 0 = 4;</em></li>
<li><em>8 mod 3 = 8 div 3 andalso 4 div 0 = 4;</em></li>
</ol>
</li>
<li><p class="first">Describe the behavior of the <em>orelse</em> operator in exercise 2 by writing an equivalent <em>if then</em> expression. You may use nested if expressions. Be sure to try your solution to see you get the same result.</p>
</li>
<li><p class="first">Describe the behavior of the <em>andalso</em> operator in exercise 2 by writing an equivalent <em>if then</em> expression. Again you can use nested if expressions.</p>
</li>
<li><p class="first">Write an expression that converts a character to a string.</p>
</li>
<li><p class="first">Write an expression that converts a real number to the next lower integer.</p>
</li>
<li><p class="first">Write an expression that converts a character to an integer.</p>
</li>
<li><p class="first">Write an expression that converts an integer to a character.</p>
</li>
<li><p class="first">What is the signature of the following functions? Give the signature and an example of using each function.</p>
<ol class="arabic simple">
<li>hd</li>
<li>tl</li>
<li>explode</li>
<li>concat</li>
<li>:: - This is an infix operator. Use the prefix form of <em>op ::</em> to get the signature.</li>
</ol>
</li>
<li><p class="first">The greatest common divisor of two numbers, <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> and <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/>, can be defined recursively. If <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/> is zero then <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> is the greatest common divisor. Otherwise, the greatest common divisor of <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> and <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/> is equal to the greatest common divisor of <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/> and the remainder <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> divided by <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/>. Write a recursive function called <em>gcd</em> to determine the greatest common divisor of <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> and <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/>.</p>
</li>
<li><p class="first">Write a recursive function called <em>allCaps</em> that given a string returns a capitalized version of the string.</p>
</li>
<li><p class="first">Write a recursive function called <em>firstCaps</em> that given a list of strings, returns a list where the first letter of each of the original strings is capitalized.</p>
</li>
<li><p class="first">Using pattern matching, write a recursive function called <em>swap</em> that swaps every pair of elements in a list. So, if  <em>[1,2,3,4,5]</em> is given to the function it returns <em>[2,1,4,3,5]</em>.</p>
</li>
<li><p class="first">Using pattern matching, write a function called <em>rotate</em> that rotates a list by <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> elements. So, <em>rotate(3,[1,2,3,4,5])</em> would return <em>[4,5,1,2,3]</em>.</p>
</li>
<li><p class="first">Use pattern matching to write a recursive function called <em>delete</em> that deletes the <img class="math" src="_images/math/7d7b52b181b1a3c66207fe79f3dd2e551590be67.png" alt="n^{th}"/> letter from a string. So, <em>delete(3,”Hi there”)</em> returns <em>“Hi here”</em>. HINT: This might be easier to do if it were a list.</p>
</li>
<li><p class="first">Again, using pattern matching write a recursive function called <em>intpow</em> that computes <img class="math" src="_images/math/cf0c5fe2b2a7c99c0cd73d6b839d8533a45875c8.png" alt="x^n"/>. It should do so with <img class="math" src="_images/math/bb7768b242e4043901f358f5240a639ed54e5de2.png" alt="O(log~n)"/> complexity.</p>
</li>
<li><p class="first">Rewrite the <em>rotate</em> function of exercise 14 calling it <em>rotate2</em> to use a helper function so as to guarantee <img class="math" src="_images/math/60f02cee74d6a1ff443851672bb9b2056a23c467.png" alt="O(n)"/> complexity where <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> is the number of positions to rotate.</p>
</li>
<li><p class="first">Rewrite exercise 14’s <em>rotate(n,lst)</em> function calling it <em>rotate3</em> to guarantee that less than <img class="math" src="_images/math/b359488b993294ebbc2c7b30ab8f749dcbc6826d.png" alt="l"/> rotations are done where <img class="math" src="_images/math/b359488b993294ebbc2c7b30ab8f749dcbc6826d.png" alt="l"/> is the length of the list. However, the outcome of rotate should be the same as if you rotated <em>n</em> times. For instance, calling the function as <em>rotate3(6,[1,2,3,4,5])</em> should return <em>[2,3,4,5,1]</em> with less than 5 recursive calls to <em>rotate3</em>.</p>
</li>
<li><p class="first">Rewrite the <em>delete</em> function from exercise 15 calling it <em>delete2</em> so that it is curried.</p>
</li>
<li><p class="first">Write a function called <em>delete5</em> that always deletes the fifth character of a string.</p>
</li>
<li><p class="first">Use a higher-order function to find all those elements of a list of integers that are even.</p>
</li>
<li><p class="first">Use a higher-order function to find all those strings that begin with a lower case letter.</p>
</li>
<li><p class="first">Use a higher-order function to write the function <em>allCaps</em> from exercise 11.</p>
</li>
<li><p class="first">Write a function called <em>find(s,file)</em> that prints the lines from the file named <em>file</em> that contain the string <em>s</em>. You can print the lines to <em>TextIO.stdOut</em>. The <em>file</em> should exist and should be in the current directory.</p>
</li>
<li><p class="first">Write a higher-order function called <em>transform</em> that applies the same function to all elements of a list transforming it to the new values. However, if an exception occurs when transforming an element of the list, the original value in the given list should be used. For instance,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- transform (fn x =&gt; 15 div x) [1,3,0,5]
val it = [15,5,0,3] : int list
</pre></div>
</div>
</li>
<li><p class="first">The natural numbers can be defined as the set of terms constructed from <img class="math" src="_images/math/532f3248d6552e7ac6b785bd935f404ad593e6a9.png" alt="0"/> and the <img class="math" src="_images/math/755d669b3f9191f06a6cdae845b8593fd2a434eb.png" alt="succ(n)"/> where <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> is a natural number. Write a datatype called <em>Natural</em> that can be used to construct natural numbers like this. Use the capital letter O for your zero value so as not to be confused with the integer <img class="math" src="_images/math/532f3248d6552e7ac6b785bd935f404ad593e6a9.png" alt="0"/> in SML.</p>
</li>
<li><p class="first">Write a <em>convert(x)</em> function that given a natural number like that defined in exercise 26 returns the integer equivalent of that value.</p>
</li>
<li><p class="first">Define a function called <em>add(x,y)</em> that given <em>x</em> and <em>y</em>, two natural numbers as described in exercise 26, returns a natural number that represents the sum of <em>x</em> and <em>y</em>. For example,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- add(succ(succ(O)),succ(O))
val it = succ(succ(succ(O))) : Natural
</pre></div>
</div>
<p>You may NOT use <em>convert</em> or any form of it in your solution.</p>
</li>
<li><p class="first">Define a function called <em>mul(x,y)</em> that given <em>x</em> and <em>y</em>, two natural numbers as described in exercise 26, returns a natural that represents the product of <em>x</em> and <em>y</em>. You may NOT use <em>convert</em> or any form of it in your solution.</p>
</li>
<li><p class="first">Using the <em>add</em> function in exercise 28, write a new function <em>hadd</em> that uses the higher order function called <em>foldr</em> to add together a list of natural numbers.</p>
</li>
<li><p class="first">The prefix calculator intpreter presented at the end of this chapter can be implemented a little more concisely by having the parser not only parse the prefix expression, but also evaluate the expression at the same time. If this is to be done, the parser ends up returning a <em>unit</em> because the parser does not need to return an AST since the expression has already been evaluated. This means the definition of the <em>AST</em> is no longer needed. Rewrite the prefix calculator code presented at the end of this chapter to combine the <em>parse</em> and <em>eval</em> functions. Remove any unneeded code from your implementation but be sure to cover all the error conditions as the version presented in this chapter.</p>
</li>
<li><p class="first">Alter the prefix expression calculator to accept either integers or floating point numbers as input. The result should always be a float in this implementation.</p>
</li>
<li><p class="first">Add an input operator to the prefix calculator. In this version, expressions like <em>+ S I 5</em> when evaluated would prompt the user to enter a value when the <em>I</em> was encountered. This expression, when evaluated, would cause the program to respond as follows.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Please enter a prefix calculator expression: + S I 5
? 4
The answer is: 9
</pre></div>
</div>
</li>
<li><p class="first">The prefix calculator intrepeter presented in this chapter can be transformed into a prefix calculator compiler by having the program write a file called <em>a.casm</em> with a CoCo program that when run evaluates the compiled prefix calculator expression. Alter the code at the end of this chapter to create a prefix caclulator compiler. Running the compiler should work like this.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>% sml
- use &quot;prefixcalc.sml&quot;;
- run();
Please enter a prefix calculator expression: + S 6 5
- &lt;ctrl-d&gt;
% coco a.casm
The answer is: 11
</pre></div>
</div>
</li>
<li><p class="first">For an extra hard project, combine the previous two exercises into one prefix calc compiler whose programs when run can gather input from the user to be used in the calculation.</p>
</li>
<li><p class="first">Rewrite the prefix calculator project to single thread the memory location through the <em>eval</em> function as shown in figure 5.12. Completing this project removes the imperatively updated memory location from the code and replaces it with a single-threaded argument to the <em>eval</em> function.</p>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="solutions-to-practice-problems">
<h2>5.26. Solutions to Practice Problems<a class="headerlink" href="#solutions-to-practice-problems" title="Permalink to this headline">¶</a></h2>
<p>These are solutions to the practice problems. You should only consult these answers after you have tried each of them for yourself first. Practice problems  are meant to help reinforce the material you have just read so make use of them.</p>
<div class="section" id="solution-to-practice-problem-5-1">
<span id="exercise5-1"></span><h3>5.26.1. Solution to Practice Problem 5.1<a class="headerlink" href="#solution-to-practice-problem-5-1" title="Permalink to this headline">¶</a></h3>
<p>Addition is not commutative in Pascal or Java. The problem is that a function call, which may be one or both of the operands to the addition operator, could have a side-effect. In that case, the functions must be called in order. If no order is specified within expression evaluation then you can’t even reliably write code with side-effects within an expression.</p>
<p>Here’s another example of the problem with side-effects within code. In the code below, it was observed that when the code was compiled with one C++ compiler it printed 1,2 while with another compiler it printed 1,1. In this case, the language definition is the problem. The C++ language definition doesn’t say what should happen in this case. The decision is left to the compiler writer.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>int x = 1;
cout &lt;&lt; x++ &lt;&lt; x &lt;&lt; endl;
</pre></div>
</div>
<p>The practice problem  writes 17  as written. If the expression were b+a() then 15 would be written.</p>
</div>
<div class="section" id="solution-to-practice-problem-5-2">
<span id="exercise5-2"></span><h3>5.26.2. Solution to Practice Problem 5.2<a class="headerlink" href="#solution-to-practice-problem-5-2" title="Permalink to this headline">¶</a></h3>
<p>With either normal order or applicative order function application is still left-associative. There is no choice for the initial redex.</p>
<p><img class="math" src="_images/math/39eaa71fb712d02f6f8c668714f857d1efe15ca7.png" alt="\underline{(\lambda xyz.xz(yz))(\lambda x.x)}(\lambda xy.x)"/></p>
<p><img class="math" src="_images/math/037bfc2f633e16b51d4879da750e077506f987c1.png" alt="\Rightarrow(\lambda yz.\underline{(\lambda x.x) z} (yz))(\lambda xy.x)"/></p>
<p><img class="math" src="_images/math/eaf312ad0bce59f0c400c9390c1c67c55faafd2d.png" alt="\Rightarrow\underline{(\lambda yz.z (yz))(\lambda xy.x)}"/></p>
<p><img class="math" src="_images/math/7c52abea99ad28b9dc0107ada9553537d6b10595.png" alt="\Rightarrow\lambda z.z (\underline{(\lambda xy.x) z})"/></p>
<p><img class="math" src="_images/math/ba92caa0969656d5fba1423a73e2c9d1a5707f1e.png" alt="\Rightarrow\lambda z.z (\lambda y.z)\Box"/></p>
</div>
<div class="section" id="solution-to-practice-problem-5-3">
<span id="exercise5-3"></span><h3>5.26.3. Solution to Practice Problem 5.3<a class="headerlink" href="#solution-to-practice-problem-5-3" title="Permalink to this headline">¶</a></h3>
<p><strong>Normal Order Reduction</strong></p>
<p><img class="math" src="_images/math/36ebfd20b5d480aa1c0b6e1e2efda39316d89e9e.png" alt="\underline{(\lambda x.y)((\lambda x.xx)(\lambda x.xx))}"/></p>
<p><img class="math" src="_images/math/e765a778aeecfe2248c30c0b3c3a0fb124fa8833.png" alt="\Rightarrow y"/></p>
<p><strong>Applicative Order Reduction</strong></p>
<p><img class="math" src="_images/math/7b742c6d4b28f58082910cb49bd062de3e24752c.png" alt="(\lambda x.y)(\underline{(\lambda x.xx)(\lambda x.xx)})"/></p>
<p><img class="math" src="_images/math/b3ad9121d00413a51d10325ed0094a2a163c7d4b.png" alt="\Rightarrow(\lambda x.y)(\underline{(\lambda x.xx)(\lambda x.xx)})"/></p>
<p><img class="math" src="_images/math/b3ad9121d00413a51d10325ed0094a2a163c7d4b.png" alt="\Rightarrow(\lambda x.y)(\underline{(\lambda x.xx)(\lambda x.xx)})"/></p>
<p><img class="math" src="_images/math/b3ad9121d00413a51d10325ed0094a2a163c7d4b.png" alt="\Rightarrow(\lambda x.y)(\underline{(\lambda x.xx)(\lambda x.xx)})"/>
…</p>
<p>You get the idea.</p>
</div>
<div class="section" id="solution-to-practice-problem-5-4">
<span id="exercise5-4"></span><h3>5.26.4. Solution to Practice Problem 5.4<a class="headerlink" href="#solution-to-practice-problem-5-4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>x div 6
Real.round(Real.fromInt(x) * y)
x / 6.3
x mod y
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-5">
<span id="exercise5-5"></span><h3>5.26.5. Solution to Practice Problem 5.5<a class="headerlink" href="#solution-to-practice-problem-5-5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun factorial(n) = if n=0 then 1 else n*factorial(n-1)
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-6">
<span id="exercise5-6"></span><h3>5.26.6. Solution to Practice Problem 5.6<a class="headerlink" href="#solution-to-practice-problem-5-6" title="Permalink to this headline">¶</a></h3>
<p>The recursive definition is fib(0) = 0, fib(1) = 1, fib(n)=fib(n-1)+fib(n-2). The recursive function is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun fib(n) = if n = 0 then 1 else
             if n = 1 then 1 else
             fib(n-1) + fib(n-2)
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-7">
<span id="exercise5-7"></span><h3>5.26.7. Solution to Practice Problem 5.7<a class="headerlink" href="#solution-to-practice-problem-5-7" title="Permalink to this headline">¶</a></h3>
<p>The solutions below are example solutions only. Others exist. However, the problem with each invalid list is not debatable.</p>
<blockquote>
<div><ol class="arabic simple">
<li>You cannot cons a character onto a string list. “a”::[“beautiful day”]</li>
<li>You cannot cons two strings. The second operand must be a list. “hi”::[“there”]</li>
<li>The element comes first in a cons operation and the list second. “you”::[“how”,”are”]</li>
<li>Lists are homogeneous. Reals and integers can’t be in a list together. [1.0,2.0,3.5,4.2]</li>
<li>Append is between two lists.2::[3,4] or <em>[2]&#64;[3,4]</em></li>
<li>Cons works with an element and a list, not a list and an element. 3::[]</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="solution-to-practice-problem-5-8">
<span id="exercise5-8"></span><h3>5.26.8. Solution to Practice Problem 5.8<a class="headerlink" href="#solution-to-practice-problem-5-8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun explode(s) =
  if s = &quot;&quot; then []
  else String.sub(s,0)::
       (explode(String.substring(s,1,String.size(s)-1)))
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-9">
<span id="exercise5-9"></span><h3>5.26.9. Solution to Practice Problem 5.9<a class="headerlink" href="#solution-to-practice-problem-5-9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun reverse(L) =
  if null L then []
  else append(reverse(tl(L)),[hd(L)])
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-10">
<span id="exercise5-10"></span><h3>5.26.10. Solution to Practice Problem 5.10<a class="headerlink" href="#solution-to-practice-problem-5-10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun reverse([]) = []
  | reverse(h::t) = reverse(t)@[h]
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-11">
<span id="exercise5-11"></span><h3>5.26.11. Solution to Practice Problem 5.11<a class="headerlink" href="#solution-to-practice-problem-5-11" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>let val x = 10
in
   (* 1. Value of x = 10 *)
   let val x = x+1
   in
     (* 2. Value of x = 11 (hidden x still is 10) *)
     x
   end;
   (* 3. Value of x = 10 (hidden x is visible again) *)
   x
end
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-12">
<span id="exercise5-12"></span><h3>5.26.12. Solution to Practice Problem 5.12<a class="headerlink" href="#solution-to-practice-problem-5-12" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>datatype intlist = nil&#39; | cons of int * intlist;
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-13">
<span id="exercise5-13"></span><h3>5.26.13. Solution to Practice Problem 5.13<a class="headerlink" href="#solution-to-practice-problem-5-13" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun maxIntList nil&#39; = valOf(Int.minInt)
  | maxIntList (cons(x,xs)) = Int.max(x,maxIntList xs)
</pre></div>
</div>
<p>or</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun maxIntList (cons(x,nil&#39;)) = x
  | maxIntList (cons(x,xs)) = Int.max(x,maxIntList xs)
</pre></div>
</div>
<p>The second solution will cause a pattern match nonexhaustive warning. That should be avoided, but is OK in this case. The  second solution will raise a pattern match exception if an empty list is given to the function. See the section on exception handling for a better solution to this problem.</p>
</div>
<div class="section" id="solution-to-practice-problem-5-14">
<span id="exercise5-14"></span><h3>5.26.14. Solution to Practice Problem 5.14<a class="headerlink" href="#solution-to-practice-problem-5-14" title="Permalink to this headline">¶</a></h3>
<p>The first step in the solution is to determine the number of calls required for values of <em>n</em>. Consulting figure 5.14 shows us that the number of calls are 1, 1, 3, 5, 9, 15, 25, etc. The next number in the sequence can be found by adding together two previous plus one more for the initial call.</p>
<p>The solution is that for <img class="math" src="_images/math/08a6b35495068ca128b56bc4ea216391638316cf.png" alt="n \geq 3"/> the function <img class="math" src="_images/math/e0471722bc9d50a0e14a2873e98c10acd0f44a2a.png" alt="1.5^{n}"/> bounds the number of calls on the lower side while <img class="math" src="_images/math/5e0dabc33c4a0ecce05bca8507606b5f11a35b1d.png" alt="2^{n}"/> bounds it on the upper side. Therefore, the number of calls increases exponentially.</p>
</div>
<div class="section" id="solution-to-practice-problem-5-15">
<span id="exercise5-15"></span><h3>5.26.15. Solution to Practice Problem 5.15<a class="headerlink" href="#solution-to-practice-problem-5-15" title="Permalink to this headline">¶</a></h3>
<p>The cons operation is called <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> times where <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> is the length of the first list when append is called. When reverse is called it calls append with <img class="math" src="_images/math/09f6e3c7bf705fcf0fb2f289b07cd472b60d215c.png" alt="n-1"/> elements in the first list the first time. The first recursive call to reverse calls append with <img class="math" src="_images/math/2c49f455d51670cf73b7361227f39b2954003f91.png" alt="n-2"/> elements in the first list. The second recursive call to reverse calls append with <img class="math" src="_images/math/b021cf3067af335721aa29c85c59660f5b32e8a8.png" alt="n-3"/> elements in the first list. If we add up <img class="math" src="_images/math/0d357546d475ae8701971df96d7403d65ca0f68c.png" alt="n-1 + n-2 + n-3 +"/>… we end up with <img class="math" src="_images/math/85d01fbd362d22536603ddb72aa562c6dd3a1801.png" alt="\sum_{i=1}^{n-1} i = ((n-1)n)/2"/>. Multiplying this out leads to an <img class="math" src="_images/math/b3f3eaa34b1d5ebe3808600684699430c83cee7f.png" alt="n^2"/> term and the overall complexity of reverse is <img class="math" src="_images/math/4841fef10387b2ee452bf6884eab3df48b5c782a.png" alt="O(n^2)"/>.</p>
</div>
<div class="section" id="solution-to-practice-problem-5-16">
<span id="exercise5-16"></span><h3>5.26.16. Solution to Practice Problem 5.16<a class="headerlink" href="#solution-to-practice-problem-5-16" title="Permalink to this headline">¶</a></h3>
<div class="figboxcenter docutils container">
<div class="figure" id="id1">
<img alt="_images/facstack.png" src="_images/facstack.png" />
<p class="caption"><span class="caption-text"><strong>Fig. 5.24: The run-time stack when factorial(6) is called at its deepest point</strong></span></p>
</div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-17">
<span id="exercise5-17"></span><h3>5.26.17. Solution to Practice Problem 5.17<a class="headerlink" href="#solution-to-practice-problem-5-17" title="Permalink to this headline">¶</a></h3>
<p>This solution uses the accumulator pattern and a helper function to implement a linear time reverse.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun reverse(L) =
    let fun helprev (nil, acc) = acc
          | helprev (h::t, acc) = helprev(t,h::acc)
    in
      helprev(L,[])
    end
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-18">
<span id="exercise5-18"></span><h3>5.26.18. Solution to Practice Problem 5.18<a class="headerlink" href="#solution-to-practice-problem-5-18" title="Permalink to this headline">¶</a></h3>
<p>This solution is surprisingly hard to figure out. In the first, f is certainly an uncurried function (look at how it is applied). The second requires f to be curried.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- fun curry f x y = f(x,y)
val curry = fn : (&#39;a * &#39;b -&gt; &#39;c) -&gt; &#39;a -&gt; &#39;b -&gt; &#39;c

- fun uncurry f (x,y) = f x y
val uncurry = fn : (&#39;a -&gt; &#39;b -&gt; &#39;c) -&gt; &#39;a * &#39;b -&gt; &#39;c
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-19">
<span id="exercise5-19"></span><h3>5.26.19. Solution to Practice Problem 5.19<a class="headerlink" href="#solution-to-practice-problem-5-19" title="Permalink to this headline">¶</a></h3>
<p>The first takes a list of lists of integers and adds one to each integer of each list in the list of lists.</p>
<p>The second function takes a list of functions that all take the same type argument, say <em>a’</em>. The function returns a list of functions that all take an <em>a’ list</em> argument. The example below might help. The list of functions that is returned by <em>(map map)</em> is suitable to be used as an argument to the <em>construction</em> function discussed earlier in the chapter.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- map (map add1);
val it = fn : int list list -&gt; int list list

(map map);
stdIn:63.16-64.10 Warning: type vars not generalized because
of value restriction are instantiated to dummy types
(X1,X2,...)
val it = fn : (?.X1 -&gt; ?.X2) list -&gt;
                      (?.X1 list -&gt; ?.X2 list) list
- fun double x = 2 * x;
val double = fn : int -&gt; int
- val flist = (map map) [add1,double];
val flist = [fn,fn] : (int list -&gt; int list) list
- construction flist [1,2,3];
val it = [[2,3,4],[2,4,6]] : int list list
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-20">
<span id="exercise5-20"></span><h3>5.26.20. Solution to Practice Problem 5.20<a class="headerlink" href="#solution-to-practice-problem-5-20" title="Permalink to this headline">¶</a></h3>
<p>foldl is left-associative and <em>foldr</em> is right-associative.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- foldr op :: nil [1,2,3];
val it = [1,2,3] : int list
- foldr op @ nil [[1],[2,3],[4,5]];
val it = [1,2,3,4,5] : int list
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-21">
<span id="exercise5-21"></span><h3>5.26.21. Solution to Practice Problem 5.21<a class="headerlink" href="#solution-to-practice-problem-5-21" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>- List.filter (fn x =&gt; x mod 7 = 0) [2,3,7,14,21,25,28];
val it = [7,14,21,28] : int list
- List.filter (fn x =&gt; x &gt; 10 orelse x = 0)
          [10, 11, 0, 5, 16, 8];
val it = [11,0,16] : int list
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-22">
<span id="exercise5-22"></span><h3>5.26.22. Solution to Practice Problem 5.22<a class="headerlink" href="#solution-to-practice-problem-5-22" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cpslen [1,2,3] (fn v =&gt; v)
= cpslen [2,3] (fn w =&gt; ((fn v =&gt; v) (1 + w)))
= cpslen [3]
       (fn x =&gt; ((fn w =&gt; ((fn v =&gt; v) (1 + w)))(1 + x)))
= cpslen []
       (fn y =&gt; ((fn x =&gt; ((fn w =&gt; ((fn v =&gt; v)
       (1 + w)))(1 + x)))(1 + y)))
= (fn y =&gt; ((fn x =&gt; ((fn w =&gt; ((fn v =&gt; v)
       (1 + w)))(1 + x)))(1 + y))) 0
= (fn x =&gt; ((fn w =&gt; ((fn v =&gt; v) (1 + w)))(1 + x))) 1
= (fn w =&gt; ((fn v =&gt; v) (1 + w))) 2
= (fn v =&gt; v) 3
= 3
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-23">
<span id="exercise5-23"></span><h3>5.26.23. Solution to Practice Problem 5.23<a class="headerlink" href="#solution-to-practice-problem-5-23" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>datatype bintree = termnode of int
       | binnode of int * bintree * bintree;

val tree = (binnode(5,binnode(3,termnode(4),binnode(8,
            termnode(5),termnode(4))), termnode(4)));

fun depth (termnode _) = 0
  | depth (binnode(_,t1,t2)) = Int.max(depth(t1),depth(t2))+1

fun cpsdepth (termnode _) k = k 0
  | cpsdepth (binnode(_,t1,t2)) k =
       Int.max(cpsdepth t1 (fn v =&gt; (k (1 + v))),
               cpsdepth t2 (fn v =&gt; (k (1 + v))))
</pre></div>
</div>
</div>
<div class="section" id="solution-to-practice-problem-5-24">
<span id="exercise5-24"></span><h3>5.26.24. Solution to Practice Problem 5.24<a class="headerlink" href="#solution-to-practice-problem-5-24" title="Permalink to this headline">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>fun card (Set L) = List.length L;

fun intersect (Set L1) S2 =
      Set ((List.filter (fn x =&gt; member x S2) L1))
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="usingsml.html" title="6. Compiling Standard ML"
             >next</a> |</li>
        <li class="right" >
          <a href="oop.html" title="4. Object-Oriented Programming"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Foundations of Programming Languages Second Edition</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Kent D. Lee.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>
  </body>
</html>